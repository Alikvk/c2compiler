// @recipe lib static
$warnings no-unused
$generate-c
$export hello

// @file{file1}
module hello;

public type Number int32;
type Priv int32;

public const int8 Third = 124;

public type State enum int8 {
    AA = 0,
    BB = 123,
    CC = Third,
    DD,
}

public type Func func int8*(int32* a, State* b);

public type Struct struct {
    int32 x;
    Struct* s;
    Number n;
    struct AA {
        int64 xx;
    }
    union {
        Struct* sp;
        void* vp;
    }
    Func ff;
}

// @expect{hello.c2i}
module hello;

public type Number int32;

public type State enum int8 {
    AA = 0,
    BB = 123,
    CC = Third,
    DD,
}

public type Func func int8*(int32* a, State* b);

public type Struct struct {
    int32 x;
    Struct* s;
    Number n;
    struct AA {
        int64 xx;
    }
    union {
        Struct* sp;
        void* vp;
    }
    Func ff;
}

